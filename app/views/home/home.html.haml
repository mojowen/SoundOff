%script{ :type => 'text/javascript', :src => '//platform.twitter.com/widgets.js'}

#top
	= image_tag asset_path('logo.png'), :class => 'home'

	#description
		%h1 Tweet @ the Right People.
		%p 
			Speak Up! We'll make sure your voice reaches the right
			%br
			people by directing your tweets directly to the decision
			%br
			makers on issues that matter to you

		%button.create_campaign{ :href => '#', :onclick => 'alert("Create Your Own Campaign!")' } Get Started
		%a.get_started Join the Conversation

#footer
	.disclaimer
		%p
			:plain
				SoundOff is an advocacy tool created and maintained by HeadCount.org, for the purpose of encouraging citizens to play an active role in goverment. This tool is available to all organizations and individuals regardless of their beliefs or affilations, so long as they comply with the Terms of Service. HeadCount does not endorse, censor or take responsiblity for any of the content of any campaign using this service, Organizations or individuals using this service do so independently and with no affiliation with HeadCount.

	.column
		%p
			%a Link
		%p
			%a Link
		%p
			%a Link
	.column
		%p
			%a Link
		%p
			%a Link
		%p
			%a Link
	.column
		%p
			%a Link
		%p
			%a Link
		%p
			%a Link

	.column
		= image_tag asset_path('headcount.png')
#main{ "ng-app" => true, "ng-controller" => 'homePageScope'  }

	#menu{  :class => params[:short_url] ? 'single' : '', 'ng-class' => '{true: "single", false: "" }[single_item != null]' }
		= image_tag 'search.png', :class => 'search'
		%input{ :placeholder => 'search', "ng-model" => "search", :type => 'text'}
		.messages
			%a.rest{ 'ng-hide' => 'search.length < 1', 'ng-click' => 'resetHard(); '} start over
			%a.open_soundoff{ 'ng-hide' => 'mode.toLowerCase() != "reps" || search.length > 0'} Don't know your representative?
		%h2 Campaigns & Elected Reps

		#tabs
			%span{ 'ng-click' => 'setScoreBoard()', 'ng-class' => 'isMode("scoreboard")' } Scoreboard
			%span{ 'ng-click' => 'setMostRecent()', 'ng-class' => 'isMode("Most Recent")' } Most Recent
			%span{ 'ng-click' => 'setReps()', 'ng-class' => 'isMode("Reps")' } Reps
		.inner
			.items
				.campaign{ "ng-repeat" => "campaign in items()", "ng-class" => "isActive($index,campaign)" }
					%h3.score {{campaign.score}}
					%h3 {{campaign.name}}

					.description {{campaign.description}}
	#more-info
		%h2 More Info
		%p
			Direct Link: 
			%input{ 'onclick' => '$(this).select()' , :value =>  '{{single_url }}' }
		%p 
			%a{ :href => '{{single_twitter }}', :target => '_blank' } Share on Twitter
			|
			%a{ :href => '{{single_facebook }}', :target => '_blank' } Share on Facebook
		%p
			%a.build_widget{ :href => '{{build_widget}}', :target => '_blank' } Build a Widget

	#content
		.item{ "ng-repeat" => "campaign in items()", "ng-class" => "isActive($index,campaign)" }
			.description
				.title
					%h1 {{campaign.name}}
					%button.open_soundoff{{  :campaign => '{{campaign.name}}'}} Sound Off
					-# %h3 
					-# 	Score
					-# 	.score {{campaign.score}}
					
					{{campaign.description}}

					%h4 Launched {{ campaign.created_at | date:'d MMMM' }}

			.tweets
				%h4
					Join the Ranks
					%span SoundOff with others about {{campaign.name}}

				.tweet{ 'ng-repeat' => 'tweet in campaign.tweets' }
					.actions
						%a{ :href =>  "https://twitter.com/{{tweet.from_user}}/status/{{tweet.id_str}}", :target => '_blank' }
							= image_tag 'twitter_logo.png'
							{{  tweet.created_at | date: 'd MMM' }}
						.buttons
							%a.reply{ :href => 'https://twitter.com/intent/tweet?in_reply_to={{tweet.id_str}}', :target => '_blank' }
							%a.retweet{ :href => 'https://twitter.com/intent/retweet?tweet_id={{tweet.id_str}}', :target => '_blank' }
							%a.favorite{ :href => 'https://twitter.com/intent/favorite?tweet_id={{tweet.id_str}}', :target => '_blank' }

					%img.profile_img{ 'ng-src' => '{{tweet.profile_image_url}}' }
					%h2 {{tweet.from_user_name}}
					%h3 @{{tweet.from_user }}

					.body {{ tweet.text }}
